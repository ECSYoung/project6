(this.webpackJsonpproject6=this.webpackJsonpproject6||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(46),i=a.n(s),c=(a(62),a(4)),o=a(5),l=a(7),u=a(6),p=a(8),m=a(26),h=a.n(m);h.a.initializeApp({apiKey:"AIzaSyCd2gqxrwZeTSOKYXliPvRpQK52kk_TVwc",authDomain:"ethicalmakeup-9f173.firebaseapp.com",databaseURL:"https://ethicalmakeup-9f173.firebaseio.com",projectId:"ethicalmakeup-9f173",storageBucket:"ethicalmakeup-9f173.appspot.com",messagingSenderId:"446242384772",appId:"1:446242384772:web:26fb2fdb2b7bc6716bcbd1"});var d=new h.a.auth.GoogleAuthProvider,v=h.a.auth(),g=h.a,f=a(47),E=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"application"},n.a.createElement(f.Helmet,null,n.a.createElement("title",null,"\u2022 Ethical Makeup \u2022"),n.a.createElement("meta",{name:"description",content:"Search for vegan makeup products"}),n.a.createElement("meta",{name:"robots",content:"index, nofollow"}),n.a.createElement("meta",{name:"author",content:"Sui Young, Naveen Malhotra, Jobert Manosca, Stephanie Kerr"}),n.a.createElement("meta",{name:"twitter:card",content:"summary"}),n.a.createElement("meta",{name:"twitter:title",content:"Ethical Makeup"}),n.a.createElement("meta",{name:"twitter:description",content:"Search for vegan makeup products"}),n.a.createElement("meta",{property:"og:url",content:"https://ethicalMakeupC25.github.io/project6/"}),n.a.createElement("meta",{property:"og:type",content:"website"}),n.a.createElement("meta",{property:"og:title",content:"Ethical Makeup"}),n.a.createElement("meta",{property:"og:description",content:"Search for vegan makeup products"})))}}]),t}(n.a.Component),b=function(){return n.a.createElement("div",{className:"preloader"},n.a.createElement("div",{id:"global"},n.a.createElement("div",{id:"top",className:"mask"},n.a.createElement("div",{className:"plane"})),n.a.createElement("div",{id:"middle",className:"mask"},n.a.createElement("div",{className:"plane"})),n.a.createElement("div",{id:"bottom",className:"mask"},n.a.createElement("div",{className:"plane"})),n.a.createElement("p",null,"LOADING...")))},y=a(9),w=a(25),S=a(50),O=a(23),k=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleClick=function(){e.setState({isUp:!e.state.isUp})},e.state={isUp:!1},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("header",null,n.a.createElement("nav",{className:"wrapper"},n.a.createElement(y.b,{exact:!0,to:"/project6/"},n.a.createElement("h1",null,"Ethical Makeup")),this.props.user?n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"userDetails"},n.a.createElement("p",null,"Hi ",this.props.user.displayName||this.props.user.email,"!"),n.a.createElement("div",{className:"buttonContainer"},n.a.createElement(y.c,{exact:!0,to:"/project6/",className:"linkStyle",activeStyle:{display:"none"},isActive:function(e,t){var a=t.pathname;return"/project6"===a||"/project6/"===a||/\/project6\/products.*$/gim.test(a)}},"search"),n.a.createElement(y.c,{to:"/project6/wishlist",className:"linkStyle",activeStyle:{display:"none"}},"wishlist"),n.a.createElement(y.c,{to:"/project6/reviews",className:"linkStyle",activeStyle:{display:"none"}},"your reviews"),n.a.createElement("button",{className:"navButton",onClick:this.props.logout},"log out"))),n.a.createElement("div",{className:"mobileUserDetails"},n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"display"},n.a.createElement("p",null,"Hi ",this.props.user.displayName||this.props.user.email,"!"),n.a.createElement(w.a,{icon:this.state.isUp?O.a:S.a,className:"toggleMenu",tabIndex:"0","aria-label":"open and close user menu",onClick:this.handleClick})),this.state.isUp?n.a.createElement("div",{className:"buttonContainer"},n.a.createElement(y.c,{exact:!0,to:"/project6/",className:"linkStyle",activeStyle:{display:"none"},isActive:function(e,t){var a=t.pathname;return"/project6"===a||"/project6/"===a||/\/project6\/products.*$/gim.test(a)}},"search"),n.a.createElement(y.c,{to:"/project6/wishlist",className:"linkStyle",activeStyle:{display:"none"}},"wishlist"),n.a.createElement(y.c,{to:"/project6/reviews",className:"linkStyle",activeStyle:{display:"none"}},"your reviews"),n.a.createElement("button",{className:"navButton",onClick:this.props.logout},"log out")):null))):n.a.createElement("button",{onClick:this.props.login,className:"logInButton navButton"},"log in to save to wishlist")))}}]),t}(r.Component),j=a(16),R=a(51),C=a.n(R),N=a(52),F=a.n(N),I=a(53),x=a.n(I),D=a(19),P=a.n(D),W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).escapeRegexCharacters=function(e){return e.replace(/[*+?^${}()|[\]\\]/g,"\\$&")},e.getSuggestions=function(t){var a=e.escapeRegexCharacters(t.trim().toLowerCase());if(""===a)return[];var r=new RegExp("\\b"+a,"i");return e.state.suggestionsOptions.filter((function(t){return r.test(e.getSuggestionValue(t))}))},e.getSuggestionValue=function(e){return e},e.renderSuggestion=function(e,t){var a=t.query,r=e,s=F()(r,a),i=x()(r,s);return n.a.createElement("span",{className:"suggestion-content "},n.a.createElement("span",{className:"suggestion"},i.map((function(e,t){var a=e.highlight?"highlight":null;return n.a.createElement("span",{className:a,key:t},e.text)}))))},e.onChange=function(t,a){var r=a.newValue;e.setState({value:r})},e.onSuggestionsFetchRequested=function(t){var a=t.value;e.setState({suggestions:e.getSuggestions(a)})},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.onSuggestionSelected=function(t,a){a.suggestion;var r=a.suggestionValue;a.suggestionIndex,a.sectionIndex,a.method;t.preventDefault(),e.setState({value:r},(function(){e.handleSubmit(t)}))},e.handleSubmit=function(t){t.preventDefault(),e.state.value?(e.props.handleSearchInput(e.state.value),e.setState({value:""})):P.a.fire({icon:"error",title:"Oops...",text:"You may want to search for something first!"})},e.state={value:"",suggestions:[],suggestionsOptions:[]},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.veganProducts.forEach((function(t){t.brand&&e.push(t.brand),t.product_type&&e.push(t.product_type),t.name&&e.push(t.name)}));var t=Object(j.a)(new Set(e));this.setState({suggestionsOptions:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,r=t.suggestions,s={placeholder:"product type, name or brand",value:a,onChange:this.onChange,id:"productSearch"};return n.a.createElement("section",{className:"searchBar"},n.a.createElement("form",{onSubmit:function(t){e.handleSubmit(t)}},n.a.createElement("label",{htmlFor:"productSearch"},"Search for vegan makeup by type, name or brand."),n.a.createElement(C.a,{suggestions:r.slice(0,5),onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,onSuggestionSelected:this.onSuggestionSelected,renderSuggestion:this.renderSuggestion,inputProps:s,focusInputOnSuggestionClick:!1})))}}]),t}(r.Component),A=a(20),T=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleClick=function(){e.props.addToWishlist(e.props.product)},e.handleRemove=function(){e.props.removeFromWishlist(e.props.product.id)},e.state={},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"productTextContainer"},n.a.createElement("div",{className:"productText"},n.a.createElement("h2",{className:"visuallyHidden"},this.props.product.name),n.a.createElement("p",null,"Brand: ",this.props.product.brand?this.props.product.brand:"Not available"),n.a.createElement("p",null,"Price: ","0.0"===this.props.product.price?"Not available":"".concat(this.props.product.price_sign?this.props.product.price_sign:"$").concat(parseInt(this.props.product.price).toFixed(2)," ").concat(this.props.product.currency?this.props.product.currency:"")),n.a.createElement("p",null,"Rating: ",this.props.product.rating?"".concat(this.props.product.rating,"/5"):"Not yet rated")),n.a.createElement(A.b,{path:"/project6/products"},n.a.createElement("button",{className:"add",onClick:this.handleClick},n.a.createElement(w.a,{icon:O.c}))),n.a.createElement(A.b,{path:"/project6/wishlist"},n.a.createElement("button",{className:"remove",onClick:this.handleRemove},n.a.createElement(w.a,{icon:O.b}))))}}]),t}(r.Component),M=function(e){var t=Object(A.h)({path:e.to,exact:e.activateOnlyWhenExact});return n.a.createElement("div",{className:t?"hide":""},n.a.createElement(y.b,{className:"reviewLink",onClick:function(t){return e.setActiveID(t,e.product.id)},to:e.to},e.label))},_=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"productImage",id:"main"},n.a.createElement(y.b,{to:"/project6/products/".concat(this.props.product.id)},n.a.createElement("img",{onClick:function(t){return e.props.setActiveID(t,e.props.product.id)},src:this.props.product.api_featured_image,alt:this.props.product.name})),n.a.createElement(T,{product:this.props.product,addToWishlist:this.props.addToWishlist,removeFromWishlist:this.props.removeFromWishlist}),n.a.createElement(M,{activateOnlyWhenExact:!0,setActiveID:this.props.setActiveID,product:this.props.product,to:"/project6/products/".concat(this.props.product.id,"/review"),label:"Reviews"}))}}]),t}(r.Component),B=function(e){var t=e.review;return n.a.createElement("div",{className:"reviewPanel"},n.a.createElement("div",{className:"userDetailsReview"},n.a.createElement("span",{className:"userSpan"},"Review Date: "),t.review.reviewDate,n.a.createElement("div",{className:"userImg"},n.a.createElement("img",{src:t.review.userImg,alt:t.review.userName}))),n.a.createElement("div",{className:"review"},n.a.createElement("p",null,n.a.createElement("span",{className:"userSpan"},t.review.userName),t.review.userReview,n.a.createElement("span",{className:"userSpan"},"Would you buy this again:"),t.review.userRepurchase,n.a.createElement("span",{className:"userSpan"},"User Rated this product: "),t.review.userRating?n.a.createElement(r.Fragment,null,t.review.userRating,"/5"):n.a.createElement(r.Fragment,null,"User did not provide rating out of 5."))))},U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).hoverHandler=function(e){var t=e.target.parentElement.getElementsByClassName("star"),a=e.target.dataset.value;Array.from(t).forEach((function(e){e.style.color=a>=e.dataset.value?"yellow":"gray"}))},a.setRating=function(e){var t=a.refs.rating.getElementsByClassName("star");Array.from(t).forEach((function(e){e.style.color=a.state.currentRating>=e.dataset.value?"yellow":"gray"}))},a.starClickHandler=function(e){var t=e.target.dataset.value;a.setState({currentRating:t},(function(){a.props.starRatingFuncProp(a.state.currentRating)}))},a.handleKeyPress=function(e){if("Enter"===e.key){var t=e.target.dataset.value;a.setState({currentRating:t},(function(){a.props.starRatingFuncProp(a.state.currentRating)}))}a.setRating()},a.state={currentRating:a.props.currentRating},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setRating()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"rating",ref:"rating","data-rating":this.state.currentRating,onMouseOut:this.setRating},Object(j.a)(Array(+this.props.numberOfStars).keys()).map((function(t){return n.a.createElement("span",{className:"star",key:t+1,"data-value":t+1,value:t+1,onMouseOver:e.hoverHandler,onClick:e.starClickHandler,onKeyDown:e.handleKeyPress,tabIndex:0,"aria-label":"star for user rating"},"\u2605")})))}}]),t}(r.Component),Y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={readReview:!0},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("button",{className:"submitButton",type:"submit"},"Submit")}}]),t}(r.Component),L=a(54),H=a.n(L),V=function(e){return n.a.createElement("div",{className:"reviewInput wrapper"},n.a.createElement("form",{className:"reviewForm",action:"submit",onSubmit:function(t){return e.handleFormSubmit(t)}},n.a.createElement(H.a,{format:"dddd, MMMM Do, YYYY, h:mm:ss A",ticking:!0,timezone:"America/Toronto",onChange:function(t){e.dateProp(t.output)}}),n.a.createElement("label",{className:"visuallyHidden",htmlFor:"userName"},"Please Enter Your Name!"),n.a.createElement("input",{name:"userName",placeholder:"What is your name?",className:"nameInputField",type:"text",id:"userName",onChange:e.handleChange,value:e.userNameProp}),n.a.createElement("label",{className:"visuallyHidden",htmlFor:"userReview"},"Please Enter Your Name!"),n.a.createElement("textarea",{id:"userReview",name:"userReview",rows:"10",cols:"80",placeholder:"Your Review:",onChange:e.handleChangeTxtArea,value:e.userReviewProp}),n.a.createElement("section",{className:"radioSection"},n.a.createElement("p",null,"Would You Repurchase This Item?"),n.a.createElement("div",null,n.a.createElement("div",{className:"yesInput"},n.a.createElement("input",{type:"radio",id:"Yes",value:"yes",name:"reviewForm",onChange:e.radioChange}),n.a.createElement("label",{htmlFor:"Yes"},"Yes")),n.a.createElement("div",{className:"noInput"},n.a.createElement("input",{type:"radio",id:"No",value:"no",name:"reviewForm",onChange:e.radioChange}),n.a.createElement("label",{htmlFor:"No"},"No")))),n.a.createElement("section",{className:"userStarRating"},n.a.createElement("span",{className:"userSpan"},"How Would You Rate This Product:"),n.a.createElement("div",{className:"starsOnly"},n.a.createElement(U,{numberOfStars:"5",currentRating:"0",onClick:e.setRating,starRatingFuncProp:e.starRatingFunc}))),n.a.createElement(Y,null)))},G=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){e.setState({userName:t.target.value})},e.handleChangeTxtArea=function(t){e.setState({userReview:t.target.value})},e.radioChange=function(t){e.setState({userRepurchase:t.target.value})},e.handleFormSubmit=function(t){if(t.preventDefault(),e.state.userName&&e.state.userReview&&e.state.userRepurchase){var a=g.database().ref("products/".concat(e.props.activeID,"/")),r=g.database().ref("users/".concat(e.state.userID,"/reviews/"));a.push({userName:e.state.userName,userImg:e.state.userImg,reviewDate:e.state.reviewDate,userRating:e.state.userRating,userReview:e.state.userReview,userRepurchase:e.state.userRepurchase,userID:e.state.userID}),r.push({userName:e.state.userName,reviewDate:e.state.reviewDate,userImg:e.state.userImg,userRating:e.state.userRating,userReview:e.state.userReview,userRepurchase:e.state.userRepurchase,userID:e.state.userID,productID:e.props.activeID}),e.setState({userName:"",userReview:"",userRepurchase:""},e.setRead)}else P.a.fire({icon:"error",title:"Oops...",text:"You've missed something! Please fill everything in the form!"})},e.setRead=function(){e.props.isWriting&&e.props.toggleReadReview()},e.setWrite=function(){e.props.isWriting||e.props.toggleReadReview()},e.getStarRating=function(t){e.setState({userRating:t})},e.getUserInputDateTime=function(t){e.setState({reviewDate:t})},e.state={reviews:[],userName:"",userRating:0,userReview:"",userRepurchase:"",userID:"",isReviewing:!1,userImg:"",reviewDate:""},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.user?this.setState({userID:this.props.user.uid,userImg:this.props.user.photoURL}):this.setState({userID:"00000",userImg:"https://i.ibb.co/rQsjc9y/images.png"}),g.database().ref("products/".concat(this.props.activeID,"/")).on("value",(function(t){var a=t.val(),r=[];for(var n in a)r.push({review:a[n],key:n});e.setState({reviews:r})}))}},{key:"componentWillUnmount",value:function(){g.database().ref("products/".concat(this.props.activeID,"/")).off()}},{key:"render",value:function(){var e=this;return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"reviewButtons"},n.a.createElement("button",{onClick:this.setWrite},"write review"),n.a.createElement("button",{onClick:this.setRead},"reviews")),n.a.createElement("div",{className:"mainGrid wrapper noOverflowX ".concat(!this.props.isWriting&&"scrollOn")},this.props.isWriting?n.a.createElement(V,{handleFormSubmit:this.handleFormSubmit,handleChangeTxtArea:this.handleChangeTxtArea,handleChange:this.handleChange,radioChange:this.radioChange,userNameProp:this.state.userName,userReviewProp:this.state.userReview,userStarProp:this.onStarClick,userRatingProp:this.userRating,starRatingFunc:this.getStarRating,dateProp:this.getUserInputDateTime}):n.a.createElement("div",{className:"reviews"},0!==this.state.reviews.length?this.state.reviews.map((function(t){return n.a.createElement(B,{review:t,key:t.key,user:e.props.user})})):n.a.createElement("p",null,"Oops, no reviews exist of this product yet! Why not leave your own review if you've tried this product before?"))))}}]),t}(r.Component),K=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={maxLength:250},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"productInfo"},n.a.createElement("h2",null,this.props.product.name),n.a.createElement("p",null,this.props.product.description.length>this.state.maxLength?n.a.createElement(r.Fragment,null,"".concat(this.props.product.description.substring(0,this.state.maxLength),"... "),n.a.createElement("span",{className:"infoLink"},n.a.createElement("a",{href:this.props.product.product_link,target:"_blank",rel:"noopener noreferrer"},"Product Page"))):n.a.createElement(r.Fragment,null,this.props.product.description,n.a.createElement("span",{className:"infoLink"},n.a.createElement("a",{href:this.props.product.product_link,target:"_blank",rel:"noopener noreferrer"},"Product Page")))),n.a.createElement("h3",null,"Colors:"),n.a.createElement("div",{className:"productColors"},0===this.props.product.product_colors.length?n.a.createElement("p",null,"No colors available."):this.props.product.product_colors.map((function(e){return n.a.createElement("span",{key:e.colour_name,"aria-label":e.colour_name,style:{background:e.hex_value},title:e.colour_name})})))),n.a.createElement(A.b,{path:"/project6/products/:productID/review",exact:!0,render:function(){return n.a.createElement(G,{user:e.props.user,activeID:e.props.activeID,isWriting:e.props.isWriting,toggleReadReview:e.props.toggleReadReview})}}))}}]),t}(r.Component),q=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).toggleReadReview=function(){e.setState({isWriting:!e.state.isWriting})},e.state={isWriting:!1},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"result ".concat(this.props.activeID===this.props.product.id&&"selected")},n.a.createElement(_,{product:this.props.product,setActiveID:this.props.setActiveID,addToWishlist:this.props.addToWishlist,removeFromWishlist:this.props.removeFromWishlist}),this.props.activeID===this.props.product.id&&n.a.createElement(K,{isWriting:this.state.isWriting,toggleReadReview:this.toggleReadReview,product:this.props.product,activeID:this.props.activeID,user:this.props.user})))}}]),t}(r.Component),$=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).setActiveID=function(t,a){e.setState({activeID:a})},e.checkForProduct=function(t){var a=!1;return e.state.wishlist.filter((function(e){if(e.productID===t)return a=!0,!0})),a},e.addToWishlist=function(t){if(e.props.user)if(e.checkForProduct(t.id))P.a.fire({icon:"error",title:"Oops...",text:"This product is already on your wishlist!"});else{g.database().ref("users/".concat(e.props.user.uid,"/wishlist")).push(t.id),P.a.fire({icon:"success",title:"Added to Wishlist!",text:"".concat(t.name," was added to your wishlist.")})}else P.a.fire({icon:"error",title:"Oops...",text:"Please log in to make a wishlist!"})},e.removeFromWishlist=function(t){var a=e.state.wishlist.filter((function(e){return e.productID===t}))[0].key;g.database().ref("users/".concat(e.props.user.uid,"/wishlist/").concat(a)).remove()},e.state={activeID:null,wishlist:[]},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.user&&g.database().ref("users/".concat(this.props.user.uid,"/wishlist")).on("value",(function(t){var a=[],r=t.val();if(r){for(var n in r)a.push({productID:r[n],key:n});e.setState({wishlist:a})}}))}},{key:"componentWillUnmount",value:function(){this.props.user&&g.database().ref("users/".concat(this.props.user.uid,"/wishlist")).off()}},{key:"render",value:function(){var e=this;return n.a.createElement("section",{className:"results"},this.props.filteredResults.length>0?this.props.filteredResults.map((function(t){return n.a.createElement(q,{key:t.id,setActiveID:e.setActiveID,activeID:e.state.activeID,product:t,user:e.props.user,addToWishlist:e.addToWishlist,removeFromWishlist:e.removeFromWishlist})})):n.a.createElement("p",null,"No results! Please try again."))}}]),t}(r.Component),J=a(55),z=a.n(J),Q=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={randomVeganArray:[]},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){for(var e=Object(j.a)(this.props.allItemsArray),t=[],a=0;a<5;a++){var r=Math.floor(Math.random()*e.length);t.push(e[r]),e.splice(r,1)}this.setState({randomVeganArray:t})}},{key:"render",value:function(){return n.a.createElement(z.a,{width:960,height:450,displayQuantityOfSide:2,enableScroll:!0,clickable:!0,active:Math.floor(this.state.randomVeganArray.length/2)},this.state.randomVeganArray.map((function(e){return n.a.createElement("img",{key:e.id,src:e.image_link,alt:e.name,"data-action":e.product_link,style:{display:"block",width:"100%"}})})))}}]),t}(r.Component),X=a(12),Z=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).filterSelection=function(t){var a=new Set(e.state.refineArray);t.target.checked?a.add(t.target.name):a.delete(t.target.name),e.setState({refineArray:Object(j.a)(a)},e.updateRefinedItemsMain)},e.updateRefinedItemsMain=function(t){e.props.updaterefinedItems(t,e.state.refineArray)},e.state={refineArray:[]},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"filterOptions"},n.a.createElement("a",{href:"#main",class:"skip-link"},n.a.createElement("div",null,"Skip to main content")),n.a.createElement("h4",null,"Filter results"),n.a.createElement("div",{className:"filterContainer"},n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"Canadian",name:"Canadian",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"Canadian"}," Canadian")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"CertClean",name:"CertClean",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"CertClean"}," Cert Clean")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"chemicalFree",name:"Chemical Free",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"chemicalFree"}," Chemical Free")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"dairyFree",name:"Dairy Free",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"dairyFree"}," Dairy Free")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"ewgVerified",name:"EWG Verified",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"ewgVerified"}," EWG Verified")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"ecoCert",name:"EcoCert",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"ecoCert"}," Eco Cert")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"fairTrade",name:"Fair Trade",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"fairTrade"}," Fair Trade")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"glutenFree",name:"Gluten Free",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"glutenFree"}," Gluten Free")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"hypoallergenic",name:"Hypoallergenic",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"hypoallergenic"}," Hypoallergenic")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"natural",name:"Natural",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"natural"}," Natural")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"nonGmo",name:"Non-GMO",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"nonGmo"}," Non-GMO")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"organic",name:"Organic",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"organic"}," Organic")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"peanutFreeProduct",name:"Peanut Free Product",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"peanutFreeProduct"}," Peanut Free Product")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"sugarFree",name:"Sugar Free",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"sugarFree"}," Sugar Free")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"usdaOrganic",name:"USDA Organic",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"usdaOrganic"}," USDA Organic")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"alcoholFree",name:"alcohol free",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"alcoholFree"}," Alcohol Free")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"oilFree",name:"oil free",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"oilFree"}," Oil Free")),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",id:"waterFree",ame:"water free",onChange:this.filterSelection}),n.a.createElement("label",{htmlFor:"waterFree"}," Water Free"))))}}]),t}(r.Component),ee=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).sortingHandle=function(t){var a=t.target.value.split("."),r=!1;r="ascending"===a[1]||"brand"===a[0];var n={value:a[0],ascending:r};e.props.updateSortBy(n)},e.state={},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"sortContainer"},n.a.createElement("label",{htmlFor:"sorting"},"Sort By : "),n.a.createElement("select",{id:"sorting",onChange:this.sortingHandle},n.a.createElement("optgroup",{label:"Choose One"}),n.a.createElement("option",{value:"brand"},"Alphabetical (by brands)"),n.a.createElement("optgroup",{label:"Ratings"}),n.a.createElement("option",{value:"rating.descending"},"Rating (Descending)"),n.a.createElement("option",{value:"rating.ascending"},"Rating (Ascending)"),n.a.createElement("optgroup",{label:"Sort by Price"}),n.a.createElement("option",{value:"price.descending"},"Price (Highest)"),n.a.createElement("option",{value:"price.ascending"},"Price (Lowest)")))}}]),t}(r.Component),te=(Object(A.i)((function(e){return n.a.createElement(te,e)})),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={userWishlist:[]},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.database().ref("users/".concat(this.props.user.uid,"/wishlist")).on("value",(function(t){if(t.val()){var a=Object.values(t.val()),r=[];a.forEach((function(t){e.props.veganProducts.filter((function(e){if(e.id===t)return r.push(e),!0}))})),e.setState({userWishlist:r})}}))}},{key:"componentWillUnmount",value:function(){g.database().ref("users/".concat(this.props.user.uid,"/wishlist")).off()}},{key:"render",value:function(){return n.a.createElement("section",{className:"wishlist"},n.a.createElement("h2",null,"Your Wishlist"),n.a.createElement($,{filteredResults:this.state.userWishlist,user:this.props.user}))}}]),t}(r.Component)),ae=te,re=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={reviews:[],products:[]},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.database().ref("users/".concat(this.props.user.uid,"/reviews/")).on("value",(function(t){var a=t.val(),r=[],n=[],s=[];for(var i in a)r.push({review:a[i],key:i}),n.push(a[i].productID);n.length>0&&e.props.veganProducts.map((function(e){return n.forEach((function(t){t===e.id&&s.push(e)}))})),e.setState({reviews:r,products:s})}))}},{key:"componentWillUnmount",value:function(){g.database().ref("users/".concat(this.props.user.uid,"/reviews/")).off()}},{key:"render",value:function(){var e=this;return n.a.createElement("section",{className:"userReviews"},0!==this.state.reviews.length?this.state.reviews.map((function(t){return n.a.createElement("div",{key:t.key},n.a.createElement("div",{className:"productImage"},n.a.createElement("img",{src:e.state.products[e.state.reviews.indexOf(t)].api_featured_image,alt:e.state.products[e.state.reviews.indexOf(t)].name}),n.a.createElement("div",{className:"productTextContainer"},n.a.createElement("div",{className:"productText"},n.a.createElement("h2",null,e.state.products[e.state.reviews.indexOf(t)].name),n.a.createElement("p",null,"Brand: ",e.state.products[e.state.reviews.indexOf(t)].brand?e.state.products[e.state.reviews.indexOf(t)].brand:"Not available"),n.a.createElement("p",null,"Price: ","0.0"===e.state.products[e.state.reviews.indexOf(t)].price?"Not available":"\n                                                ".concat(e.state.products[e.state.reviews.indexOf(t)].price_sign?e.state.products[e.state.reviews.indexOf(t)].price_sign:"$").concat(parseInt(e.state.products[e.state.reviews.indexOf(t)].price).toFixed(2)," \n                                                ").concat(e.state.products[e.state.reviews.indexOf(t)].currency?e.state.products[e.state.reviews.indexOf(t)].currency:"","\n                                                ")),n.a.createElement("p",null,"Rating: ",e.state.products[e.state.reviews.indexOf(t)].rating?"".concat(e.state.products[e.state.reviews.indexOf(t)].rating,"/5"):"Not yet rated")))),n.a.createElement(B,{review:t,user:e.props.user}))})):n.a.createElement("p",null,"You haven't reviewed any products yet! Try going to Search and check out some products you can review."))}}]),t}(r.Component),ne=function(){var e=Object(A.g)();return n.a.createElement("p",null,"ahhhhh ",e.pathname," DOES NOT FUCKING EXIST")},se=Object(X.a)(),ie=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleSearchInput=function(t){var a=t.toLowerCase();e.setState({searchInput:a,isSearched:!0},e.filterResults)},e.sortArray=function(t){if(0!==t.length){var a=Object(j.a)(t);return a.sort((function(t,a){var r,n=t[e.state.sortBy.value],s=a[e.state.sortBy.value];return r=e.state.sortBy.ascending?1:-1,n?(n=isNaN(parseInt(n))?n.toUpperCase():parseFloat(n),s?n<(s=isNaN(parseInt(s))?s.toUpperCase():parseFloat(s))?-r:n>s?r:0:r):-r})),a}},e.filterResults=function(){var t,a=[];(t=e.props.veganProducts.filter((function(t){var a=t.product_type?t.product_type.toLowerCase():"",r=t.name?t.name.toLowerCase():"",n=t.brand?t.brand.toLowerCase():"";return a.includes(e.state.searchInput)||r.includes(e.state.searchInput)||n.includes(e.state.searchInput)}))).length>0&&(a=e.sortArray(t)),a.length>0?e.setState({filteredResults:a,originalResults:a},(function(){se.push("/project6/products")})):e.setState({filteredResults:t,originalResults:t},(function(){se.push("/project6/products")}))},e.newResults=function(t,a){var r=[];if(0!==a.length){e.state.originalResults.map((function(e){return e.tag_list.forEach((function(t){a.forEach((function(a){a===t&&(r.includes(e)||r.push(e))}))}))}));var n=e.sortArray(r);n?e.setState({filteredResults:n}):e.setState({filteredResults:r})}else e.setState({filteredResults:e.state.originalResults})},e.updateSortBy=function(t){e.setState({sortBy:t},(function(){var t=e.sortArray(e.state.filteredResults);e.setState({filteredResults:t})}))},e.state={searchInput:"",filteredResults:[],originalResults:[],sortBy:{value:"brand",ascending:!0},isSearched:!1},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("main",{className:"wrapper"},n.a.createElement(A.d,null,n.a.createElement(A.b,{path:"/project6/",exact:!0},this.state.isSearched?n.a.createElement(A.a,{to:"/project6/products"}):n.a.createElement(r.Fragment,null,n.a.createElement(W,{veganProducts:this.props.veganProducts,handleSearchInput:this.handleSearchInput}),n.a.createElement(Q,{allItemsArray:this.props.veganProducts}))),n.a.createElement(A.b,{path:"/project6/products"},n.a.createElement(W,{veganProducts:this.props.veganProducts,handleSearchInput:this.handleSearchInput}),n.a.createElement(Z,{updaterefinedItems:this.newResults}),n.a.createElement(ee,{filteredResults:this.state.filteredResults,updateSortBy:this.updateSortBy}),n.a.createElement($,{filteredResults:this.state.filteredResults,user:this.props.user})),n.a.createElement(A.b,{exact:!0,path:"/project6/wishlist"},this.props.user?n.a.createElement(ae,{user:this.props.user,veganProducts:this.props.veganProducts}):n.a.createElement(A.a,{to:"/project6/"})),n.a.createElement(A.b,{exact:!0,path:"/project6/reviews"},this.props.user?n.a.createElement(re,{user:this.props.user,veganProducts:this.props.veganProducts}):n.a.createElement(A.a,{to:"/project6/"})),n.a.createElement(A.b,{path:"",component:ne})))}}]),t}(r.Component),ce=function(){return n.a.createElement("footer",null,n.a.createElement("div",{className:"wrapper"},n.a.createElement("p",null,"\xa9 2020",n.a.createElement("a",{href:"http://xyoung.ca/",target:"_blank",rel:"noopener noreferrer"},"Sui Young"),",",n.a.createElement("a",{href:"http://naveenmalhotra.ca/",target:"_blank",rel:"noopener noreferrer"},"Naveen Malhotra"),",",n.a.createElement("a",{href:"https://github.com/joemano",target:"_blank",rel:"noopener noreferrer"},"Jobert Manosca"),",",n.a.createElement("a",{href:"https://stephaniekerr.io",target:"_blank",rel:"noopener noreferrer"},"Stephanie Kerr"))))},oe=a(56),le=a.n(oe),ue=(a(117),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).login=function(){v.signInWithPopup(d).then((function(t){e.setState({user:t.user})}))},e.logout=function(){v.signOut().then((function(){e.setState({user:null})}))},e.state={veganArray:[],isLoading:!0,user:null},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;le()({url:"https://makeup-api.herokuapp.com/api/v1/products.json",method:"GET",responseType:"json",params:{product_tags:"vegan"}}).then((function(t){e.setState({veganArray:t.data,isLoading:!1})})),v.onAuthStateChanged((function(t){t&&e.setState({user:t})}))}},{key:"render",value:function(){return n.a.createElement(y.a,null,n.a.createElement(r.Fragment,null,n.a.createElement(E,null),this.state.isLoading?n.a.createElement(b,null):n.a.createElement("div",{className:"outerWrapper"},n.a.createElement(k,{login:this.login,logout:this.logout,user:v.currentUser}),n.a.createElement(ie,{veganProducts:this.state.veganArray,user:v.currentUser,userCheck:v.onAuthStateChanged}),n.a.createElement(ce,null))))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){e.exports=a(118)},62:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.da99e1ff.chunk.js.map